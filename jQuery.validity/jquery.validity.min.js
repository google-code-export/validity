/*
 * jQuery.validity beta v0.9.4
 * http://code.google.com/p/validity/
 * 
 * Copyright (c) 2009 Wyatt Allen
 * Dual licensed under the MIT and GPL licenses.
 * http://docs.jquery.com/License
 *
 * Date: 2009-04-13 (Mon, 13 April 2009)
 * Revision: 13
 */
 (function(jQuery){var outputModes={modal:"MODAL",summary:"SUMMARY",custom:"CUSTOM",none:"NONE"};var defaults={outputMode:outputModes.modal,raiseCustomOutputModeError:function($obj,msg){},raiseCustomOutputModeAggregateError:function($obj,msg){},customOutputModeClear:function(){},firstCustomOutputErrorId:function(){},scrollTo:false,summaryOutputWrapper:"<li/>",modalErrorsClickable:true};var $phi=jQuery([]);var selectors={summaryContainer:"#validity-summary-container",summaryOutput:"#validity-summary-output",modalOutput:"#validity-modal-output",modalErrors:".validity-modal-msg",erroneousInputs:".validity-erroneous"};var classes={modalError:"validity-modal-msg",erroneousInput:"validity-erroneous"};var prefixes={modalErrorId:"validity-modal-msg-"};jQuery.validity={settings:jQuery.extend(defaults,{}),clear:function(){if(jQuery.validity.settings.outputMode==outputModes.modal)
jQuery(selectors.modalErrors).remove();else if(jQuery.validity.settings.outputMode==outputModes.summary){jQuery(selectors.summaryContainer).hide();jQuery(selectors.summaryOutput).html('');jQuery(selectors.erroneousInputs).removeClass(classes.erroneousInput);}
else if(jQuery.validity.settings.outputMode==outputModes.custom)
jQuery.validity.settings.customOutputModeClear();},generalError:function(msg){raiseError(null,msg);},setup:function(options){jQuery.validity.settings=jQuery.extend(defaults,options);jQuery.validity.settings.outputMode=jQuery.validity.settings.outputMode.toUpperCase();},assertThat:function(expression,msg){if(!expression)GeneralError(msg);},report:null,isTransactionOpen:function(){return jQuery.validity.report!=null;},start:function(){jQuery.validity.clear();jQuery.validity.report={errors:0,valid:true};},end:function(){var report=jQuery.validity.report;jQuery.validity.report=null;if(jQuery.validity.settings.scrollTo)
location.hash=firstErrorId();return report;}};jQuery.fn.require=function(msg){return validate(this,function(elem){return elem.value.length>0;},msg);};jQuery.fn.match=function(msg,regex){return validate(this,function(elem){return elem.value.length==0||regex.test(elem.value);},msg);};jQuery.fn.range=function(msg,min,max){return validate(this,function(elem){var f=parseFloat(elem.value);return f>min&&f<max;},msg);};jQuery.fn.equal=function(msg,transform){if(transform==null)
transform=function(val){return val;};if(this.length>0){var temp=transform(this.get(0).value);var valid=true;this.each(function(){if(transform(this.value)!=temp)
valid=false;});if(valid)
return this;else
raiseAggregateError(this,msg);}
return $phi;};jQuery.fn.distinct=function(msg,transform){if(transform==null)
transform=function(val){return val;};if(this.length>0){var values=new Array();var valid=true;this.each(function(idx){var transformedValue=transform(this.value);for(i in values){if(transformedValue.length>0&&values[i]==transformedValue)
valid=false;}
values[idx]=transformedValue;});if(valid)
return this;else
raiseAggregateError(this,msg);}
return $phi;};jQuery.fn.sum=function(msg,sum){if(this.length>0){if(sum==numericSum(this))
return this;else
return $phi;}
return $phi;};jQuery.fn.sumMax=function(msg,max){if(this.length>0){if(max>=numericSum(this))
return this;else
raiseAggregateError(this,msg);}
return $phi;};jQuery.fn.assert=function(expression,msg){if(!expression)raiseError(this,msg);};function validate($elem,regimen,message){var elements=new Array();$elem.each(function(){if(regimen(this))
elements.push(this);else
raiseError(this,message);});return $(elements);}
function addToReport(){if(jQuery.validity.isTransactionOpen()){jQuery.validity.report.errors++;jQuery.validity.report.valid=false;}}
function raiseError(elem,msg){addToReport();if(jQuery.validity.settings.outputMode==outputModes.modal)
raiseModalError(elem,msg);else if(jQuery.validity.settings.outputMode==outputModes.summary)
raiseSummaryError(elem,msg);else if(jQuery.validity.settings.outputMode==outputModes.custom)
jQuery.validity.settings.raiseCustomOutputModeError(elem,msg);}
function raiseModalError(obj,msg){var $obj=jQuery(obj);var off=$obj.offset();var errorStyle={left:parseInt(off.left+$obj.width()+4)+"px",top:parseInt(off.top-10)+"px"};var errorId=prefixes.modalErrorId+$obj.attr("id");var errorSelector="#"+errorId;if(jQuery(errorSelector).length==0)
jQuery("<div/>").attr("id",errorId).addClass(classes.modalError).css(errorStyle).text(msg).click(jQuery.validity.settings.modalErrorsClickable?function(){jQuery(this).remove();}:null).appendTo(selectors.modalOutput);else
jQuery(errorSelector).css(errorStyle).text(msg);}
function raiseSummaryError(obj,msg){pumpToSummary(msg);jQuery(obj).addClass(classes.erroneousInput);}
function pumpToSummary(msg){jQuery(jQuery.validity.settings.summaryOutputWrapper).text(msg).appendTo(selectors.summaryOutput);jQuery(selectors.summaryContainer).show();}
function raiseAggregateError(obj,msg){addToReport();if(jQuery.validity.settings.outputMode==outputModes.modal)
raiseAggregateModalError(obj,msg);else if(jQuery.validity.settings.outputMode==outputModes.summary)
raiseSummaryError(obj,msg);else if(jQuery.validity.settings.outputMode==outputModes.custom)
jQuery.validity.settings.raiseCustomOutputModeAggregateError(obj,msg);}
function raiseAggregateModalError(obj,msg){if(obj.length>0)
raiseModalError(jQuery(obj.get(0)),msg);}
function numericSum(obj){var accumulator=0;obj.each(function(){var n=parseFloat(this.value);if(!isNaN(n))
accumulator+=n;});return accumulator;}
function firstErrorId(){if(jQuery.validity.settings.outputMode==outputModes.modal)
return jQuery(selectors.modalErrors+":first").attr("id");else if(jQuery.validity.settings.outputMode==outputModes.summary)
return jQuery(selectors.erroneousInputs+":first").attr("id");else if(jQuery.validity.settings.outputMode==outputModes.custom)
return jQuery.validity.settings.firstCustomOutputErrorId();else
return"_";}})(jQuery);